import React from "react"

import { WalletCurrency } from "@app/graphql/generated"
import { render } from "@testing-library/react-native"
import { Wrapping } from "./helper"

import {
  DestinationDirection,
  PaymentDestination,
  ResolvedIntraledgerPaymentDestination,
} from "@app/screens/send-bitcoin-screen/payment-destination/index.types"
import { createIntraledgerPaymentDetails } from "@app/screens/send-bitcoin-screen/payment-details"
import SendBitcoinDetailsScreen from "@app/screens/send-bitcoin-screen/send-bitcoin-details-screen"
import { PaymentType } from "@galoymoney/client/dist/parsing-v2"

const walletId = "f79792e3-282b-45d4-85d5-7486d020def5"
const handle = "test"

const validDestination: ResolvedIntraledgerPaymentDestination = {
  valid: true,
  walletId,
  paymentType: PaymentType.Intraledger,
  handle,
}

const createPaymentDetail = ({ convertPaymentAmount, sendingWalletDescriptor }) => {
  return createIntraledgerPaymentDetails({
    handle,
    recipientWalletId: walletId,
    sendingWalletDescriptor,
    convertPaymentAmount,
    unitOfAccountAmount: {
      amount: 0,
      currency: WalletCurrency.Btc,
    },
  })
}

const paymentDestination: PaymentDestination = {
  valid: true,
  validDestination,
  destinationDirection: DestinationDirection.Send,
  createPaymentDetail,
}

const sendBitcoinDetails = {
  key: "sendBitcoinDetailsScreen",
  name: "sendBitcoinDetails",
  params: {
    paymentDestination,
  },
} as const

it("SendScreen Details", () => {
  render(
    <Wrapping>
      <SendBitcoinDetailsScreen route={sendBitcoinDetails} />
    </Wrapping>,
  )
})
